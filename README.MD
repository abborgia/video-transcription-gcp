# üéß Transcripci√≥n de Videos con Google Cloud Speech-to-Text

Script en Python que:
1) extrae el **audio** de un video (MP4 ‚Üí MP3),
2) sube el audio a **Google Cloud Storage (GCS)**,
3) ejecuta una **transcripci√≥n as√≠ncrona** con **Speech-to-Text**,
4) guarda el resultado en un **.txt** junto al video original.

> Probado con `moviepy`, `google-cloud-speech` y `google-cloud-storage`.

---

## üóÇ Estructura sugerida del proyecto

app-transcripcion-videos/
‚îú‚îÄ transcripcion.py
‚îú‚îÄ README.md
‚îú‚îÄ requirements.txt
‚îú‚îÄ .gitignore
‚îú‚îÄ videos/ # (opcional) fuente de videos
‚îú‚îÄ outputs/ # (opcional) a- .mp3 b- .txt
‚îî‚îÄ secrets/ # claves/credenciales (NO se versionan)

markdown
Copiar
Editar

> Puedes mantener tus videos en `videos/` y las salidas en `outputs/`. Ajusta rutas seg√∫n tu preferencia.

---

## ‚úÖ Requisitos

- **Python 3.10.7**
- Cuenta de **Google Cloud** con:
  - Proyecto habilitado (`urbanvibe-pruebas` u otro)
  - API **Speech-to-Text** habilitada
  - **Bucket** GCS creado (por ej. `speech_to_text_esm_pruebas`)
  - **Credencial de servicio** (JSON)
- **FFmpeg** instalado (requerido por `moviepy` para manipular audio/video)

### Instalar FFmpeg
- Windows: `choco install ffmpeg` (o descarga desde la web oficial)
- macOS: `brew install ffmpeg`
- Linux (Debian/Ubuntu): `sudo apt-get install ffmpeg`

---

## üîê Autenticaci√≥n GCP

Guarda tu **clave JSON** de cuenta de servicio en `./secrets/` y exporta la variable:

```bash
# Windows (PowerShell)
$env:GOOGLE_APPLICATION_CREDENTIALS = ".\secrets\mi-servicio.json"

# macOS / Linux
export GOOGLE_APPLICATION_CREDENTIALS="./secrets/mi-servicio.json"
üß© Instalaci√≥n
bash
Copiar
Editar
# 1) Crear y activar entorno virtual
python -m venv .venv
# Windows:
.venv\Scripts\activate
# macOS/Linux:
source .venv/bin/activate

# 2) Instalar dependencias
pip install -r requirements.txt
# Si no tienes requirements.txt todav√≠a:
# pip install google-cloud-speech google-cloud-storage moviepy
requirements.txt (sugerido):

txt
Copiar
Editar
google-cloud-speech>=2.27.0
google-cloud-storage>=2.18.0
moviepy>=1.0.3
‚öôÔ∏è Configuraci√≥n del script
En transcripcion.py, verifica/ajusta:

python
Copiar
Editar
GCP_PROJECT_ID = "urbanvibe-pruebas"
GCS_BUCKET_NAME = "speech_to_text_esm_pruebas"
AUDIO_LANGUAGE_CODE = "es-CL"
Recomendaci√≥n futura: leer estos valores desde variables de entorno para evitar hardcode (ej. os.getenv("GCS_BUCKET_NAME")).

‚ñ∂Ô∏è Uso
Opci√≥n A: editar la ruta dentro del script
En la secci√≥n if __name__ == "__main__": cambia ruta_del_video por la ruta a tu archivo:

python
Copiar
Editar
ruta_del_video = "videos/mi_video.mp4"
y luego ejecuta:

bash
Copiar
Editar
python transcripcion.py
Opci√≥n B (mejora r√°pida): pasar la ruta por argumento
Ejemplo r√°pido (si agregas un sys.argv):

bash
Copiar
Editar
python transcripcion.py "videos/mi_video.mp4"
Si te interesa, te paso el snippet para aceptar argumentos inmediatamente.

üìÑ Salidas
mi_video.mp3 (audio extra√≠do)

mi_video.txt (transcripci√≥n final)

